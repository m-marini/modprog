(this.webpackJsonpprogress=this.webpackJsonpprogress||[]).push([[0],{28:function(e,n,a){},42:function(e,n,a){e.exports=a(54)},47:function(e,n,a){},54:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),l=a(16),o=a.n(l),i=(a(47),a(28),a(29)),c=a(30),u=a(19),m=a(41),s=a(40),h=a(39),d=a(5),v=a.n(d),E={2:[5,3,4,6,7],3:[6,4,2,5],4:[5,1,6,2,7,3],5:[1,6,3,4],6:[2,5,4,3],7:[1,6,3,5]},b=["Maj7","m7","m7(b9)","Maj7(+11)","7","m7(+5)","m7b5"],p=["C","G","D","A","E","B","F#","C#","F","Bb","Eb","Ab","Db","Gb","Cb"],f={C:["C","D","E","F","G","A","B"],G:["G","A","B","C","D","E","F#"],D:["D","E","F#","G","A","B","C#"],A:["A","B","C#","D","E","F#","G#"],E:["E","F#","G","A","B","C#","D#"],B:["B","C#","D#","E","F#","G","A#"],"F#":["F#","G","A#","B","C#","D#","E#"],"C#":["C#","D#","E#","F#","G","A#","B#"],F:["F","G","A","Bb","C","D","E"],Bb:["Bb","C","D","Eb","F","G","A"],Eb:["Eb","F","G","Ab","Bb","C","D"],Ab:["Ab","Bb","C","Db","Eb","F","G"],Db:["Db","Eb","F","Gb","Ab","Bb","C"],Gb:["Gb","Ab","Bb","Cb","Db","Eb","F"],Cb:["Cb","Db","Eb","Fb","Gb","Ab","Bb"]};function g(e,n){var a=n.end,t=n.minLen,r=v.a.last(e);return e.length>=t&&a===r}function C(e,n){return f[e][n-1]+b[n-1]}function y(e,n){var a=e.chords,t=e.priority,r=n.end,l=n.minLen,o=v.a.last(a);if(!o)throw new Error("no last found");var i=function(e){var n=function(){if(1===e)return{chords:v.a.range(2,8),priorities:v.a.fill(v.a.range(2,8),1)};var n=E[e];return{chords:n,priorities:v.a.range(1,n.length+1)}}(),a=n.chords,t=n.priorities;return v()(a).zip(t).map((function(e){var n=Object(h.a)(e,2),a=n[0],t=n[1];if(!a||!t)throw new Error("wrong candidates");return{chord:a,priority:t}})).value()}(o),c=v.a.filter(i,(function(e){return n=a,t=e.chord,v.a.indexOf(n,t)<0||e.chord===r&&a.length+1>=l;var n,t}));return v.a.map(c,(function(e){return{chords:v.a.concat(a,e.chord),priority:t+e.priority}}))}var L=a(57),k=a(58),B=a(64),F=a(33),A=a(63),D=a(62),w=a(59),G=a(60),x=a(37),M=a(61),S=a(38),j=v.a.range(1,8),I=function(e){var n=e.value,a=void 0===n?[]:n;return r.a.createElement("span",null,v.a.map(a,(function(e,n){return r.a.createElement("span",{key:n},r.a.createElement(L.a,{variant:"primary"},e.name),r.a.createElement("span",null," "))})))},P=function(e){var n=e.value;if(n){var a=n.avgPriority,t=n.priority,l=n.chords,o=v.a.join(v.a.map(l,"mode"),"-");return r.a.createElement("tr",null,r.a.createElement("td",null,o),r.a.createElement("td",null,r.a.createElement(I,{value:l})),r.a.createElement("td",null,a.toFixed(2)),r.a.createElement("td",null,t))}return r.a.createElement("tr",null)},O=function(e){var n=e.value,a=(null===n||void 0===n?void 0:n.chains)||[];return r.a.createElement(k.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Modes"),r.a.createElement("th",null,"Chords"),r.a.createElement("th",null,"Average Favor"),r.a.createElement("th",null,"Total Favor"))),r.a.createElement("tbody",null,v.a.map(a,(function(e,n){return r.a.createElement(P,{key:n,value:e})}))))},R=function(e){var n=e.value,a=null===n||void 0===n?void 0:n.errors,t=null===n||void 0===n?void 0:n.progressions;return a?r.a.createElement(B.a,{variant:"danger"},a):t?r.a.createElement(O,{value:t}):r.a.createElement("div",null)},z=function(e){var n=e.value,a=e.onChange;return r.a.createElement(F.a,{as:"select",size:"sm",onChange:function(e){a&&a(e.target.value)},value:n},v.a.map(p,(function(e){return r.a.createElement("option",{key:e},e)})))},J=function(e){var n=e.value,a=e.onChange;return r.a.createElement(F.a,{as:"select",size:"sm",onChange:function(e){a&&a(parseInt(e.target.value))},value:n},j.map((function(e){return r.a.createElement("option",{key:e},e)})))},T=function(e){var n=e.value,a=e.min,t=void 0===a?1:a,l=e.max,o=void 0===l?7:l,i=e.onChange;return r.a.createElement(F.a,{as:"select",size:"sm",onChange:function(e){i&&i(parseInt(e.target.value))},value:n},v.a.range(t,o+1).map((function(e){return r.a.createElement("option",{key:e},e)})))},W=function(e){Object(m.a)(a,e);var n=Object(s.a)(a);function a(e){var t;return Object(i.a)(this,a),(t=n.call(this,e)).state={start:1,end:1,pitch:"C",minLen:2,maxLen:3},v.a.bindAll(Object(u.a)(t),["handlePitch","handleStartRank","handleEndRank","handleMinLen","handleMaxLen","compute"]),t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handlePitch",value:function(e){this.setState({pitch:e})}},{key:"handleStartRank",value:function(e){this.setState({start:e})}},{key:"handleEndRank",value:function(e){this.setState({end:e})}},{key:"handleMinLen",value:function(e){this.setState({minLen:e})}},{key:"handleMaxLen",value:function(e){this.setState({maxLen:e})}},{key:"compute",value:function(){var e=this.state.minLen>this.state.maxLen?"min length must be less or equal than max length":void 0;return e?{errors:e}:{progressions:function(e){for(var n=e.start,a=e.end,t=e.minLen,r=e.maxLen,l=e.pitch,o=[{chords:[n],priority:0}],i=[],c=1;c<=r-1;c++){var u=v()(o).map((function(e){return y(e,{end:a,minLen:t})})).flatten().value(),m=v.a.partition(u,(function(e){return g(e.chords,{end:a,minLen:t})}));i=v.a.concat(i,m[0]),o=m[1]}var s=v()(i).map((function(e){return{avgPriority:e.priority/(e.chords.length-1),chords:v.a.map(e.chords,(function(e){return{mode:e,name:C(l,e)}})),priority:e.priority}})).sortBy("avgPriority","priority",(function(e){return e.chords.length})).value();return{pitch:l,chains:s}}(this.state)}}},{key:"render",value:function(){var e=this.state,n=e.pitch,a=e.minLen,t=e.maxLen,l=e.start,o=e.end,i=this.compute();return r.a.createElement("div",null,r.a.createElement(A.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(A.a.Brand,{href:"http://www.mmarini.org"},"www.mmarini.org"),r.a.createElement(A.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(A.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(D.a,{className:"mr-auto"},r.a.createElement(D.a.Link,{href:"#"},"Modal Progressions ","1.1.2")))),r.a.createElement(w.a,null,r.a.createElement(G.a,null,r.a.createElement(x.a,null,r.a.createElement(R,{value:i})),r.a.createElement(x.a,{xs:2},r.a.createElement(M.a,null,r.a.createElement(S.a,{controlId:"pitch"},r.a.createElement(M.a.Label,null,"Pitch"),r.a.createElement(z,{value:n,onChange:this.handlePitch})),r.a.createElement(S.a,{controlId:"startMode"},r.a.createElement(M.a.Label,null,"Start mode"),r.a.createElement(J,{value:l,onChange:this.handleStartRank})),r.a.createElement(S.a,{controlId:"endMode"},r.a.createElement(M.a.Label,null,"End mode"),r.a.createElement(J,{value:o,onChange:this.handleEndRank})),r.a.createElement(S.a,{controlId:"minLen"},r.a.createElement(M.a.Label,null,"Min chain length"),r.a.createElement(T,{value:a,min:2,max:8,onChange:this.handleMinLen})),r.a.createElement(S.a,{controlId:"minLen"},r.a.createElement(M.a.Label,null,"Max chain length"),r.a.createElement(T,{value:t,min:2,max:8,onChange:this.handleMaxLen})))))))}}]),a}(t.Component),q=(a(53),function(){return r.a.createElement("div",null,r.a.createElement(W,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.3ed04c4b.chunk.js.map