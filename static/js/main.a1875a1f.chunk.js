(this.webpackJsonpprogress=this.webpackJsonpprogress||[]).push([[0],{28:function(e,a,n){},31:function(e){e.exports=JSON.parse('{"a":"1.1.4"}')},47:function(e,a,n){},54:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),l=n(16),i=n.n(l),o=(n(47),n(28),n(29)),c=n(30),u=n(19),m=n(42),s=n(41),d=n(40),h=n(5),E=n.n(h),v={2:[5,3,4,6,7],3:[6,4,2,5],4:[5,1,6,2,7,3],5:[1,6,3,4],6:[2,5,4,3],7:[1,6,3,5]},b=["Maj7","m7","m7(b9)","Maj7(+11)","7","m7(+5)","m7b5"],p=["C","G","D","A","E","B","F#","C#","F","Bb","Eb","Ab","Db","Gb","Cb"],f={C:["C","D","E","F","G","A","B"],G:["G","A","B","C","D","E","F#"],D:["D","E","F#","G","A","B","C#"],A:["A","B","C#","D","E","F#","G#"],E:["E","F#","G","A","B","C#","D#"],B:["B","C#","D#","E","F#","G","A#"],"F#":["F#","G","A#","B","C#","D#","E#"],"C#":["C#","D#","E#","F#","G","A#","B#"],F:["F","G","A","Bb","C","D","E"],Bb:["Bb","C","D","Eb","F","G","A"],Eb:["Eb","F","G","Ab","Bb","C","D"],Ab:["Ab","Bb","C","Db","Eb","F","G"],Db:["Db","Eb","F","Gb","Ab","Bb","C"],Gb:["Gb","Ab","Bb","Cb","Db","Eb","F"],Cb:["Cb","Db","Eb","Fb","Gb","Ab","Bb"]};function g(e,a){var n=a.end,t=a.minLen,r=E.a.last(e);return e.length>=t&&n===r}function C(e,a){return f[e][a-1]+b[a-1]}function y(e,a){var n=e.chords,t=e.priority,r=a.end,l=a.minLen,i=E.a.last(n);if(!i)throw new Error("no last found");var o=function(e){var a=function(){if(1===e)return{chords:E.a.range(2,8),priorities:E.a.fill(E.a.range(2,8),1)};var a=v[e];return{chords:a,priorities:E.a.range(1,a.length+1)}}(),n=a.chords,t=a.priorities;return E()(n).zip(t).map((function(e){var a=Object(d.a)(e,2),n=a[0],t=a[1];if(!n||!t)throw new Error("wrong candidates");return{chord:n,priority:t}})).value()}(i),c=E.a.filter(o,(function(e){return a=n,t=e.chord,E.a.indexOf(a,t)<0||e.chord===r&&n.length+1>=l;var a,t}));return E.a.map(c,(function(e){return{chords:E.a.concat(n,e.chord),priority:t+e.priority}}))}var L=n(57),k=n(58),B=n(64),F=n(34),A=n(63),D=n(62),G=n(59),x=n(60),M=n(38),w=n(61),S=n(39),j=n(31).a,I=E.a.range(1,8),O=function(e){var a=e.value,n=void 0===a?[]:a;return r.a.createElement("span",null,E.a.map(n,(function(e,a){return r.a.createElement("span",{key:a},r.a.createElement(L.a,{variant:"primary"},e.name),r.a.createElement("span",null," "))})))},P=function(e){var a=e.value;if(a){var n=a.avgPriority,t=a.priority,l=a.chords,i=E.a.join(E.a.map(l,"mode"),"-");return r.a.createElement("tr",null,r.a.createElement("td",null,i),r.a.createElement("td",null,r.a.createElement(O,{value:l})),r.a.createElement("td",null,n.toFixed(2)),r.a.createElement("td",null,t))}return r.a.createElement("tr",null)},R=function(e){var a=e.value,n=(null===a||void 0===a?void 0:a.chains)||[];return r.a.createElement(k.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Modes"),r.a.createElement("th",null,"Chords"),r.a.createElement("th",null,"Average Favor"),r.a.createElement("th",null,"Total Favor"))),r.a.createElement("tbody",null,E.a.map(n,(function(e,a){return r.a.createElement(P,{key:a,value:e})}))))},z=function(e){var a=e.value,n=null===a||void 0===a?void 0:a.errors,t=null===a||void 0===a?void 0:a.progressions;return n?r.a.createElement(B.a,{variant:"danger"},n):t?r.a.createElement(R,{value:t}):r.a.createElement("div",null)},J=function(e){var a=e.value,n=e.onChange;return r.a.createElement(F.a,{as:"select",size:"sm",onChange:function(e){n&&n(e.target.value)},value:a},E.a.map(p,(function(e){return r.a.createElement("option",{key:e},e)})))},N=function(e){var a=e.value,n=e.onChange;return r.a.createElement(F.a,{as:"select",size:"sm",onChange:function(e){n&&n(parseInt(e.target.value))},value:a},I.map((function(e){return r.a.createElement("option",{key:e},e)})))},T=function(e){var a=e.value,n=e.min,t=void 0===n?1:n,l=e.max,i=void 0===l?7:l,o=e.onChange;return r.a.createElement(F.a,{as:"select",size:"sm",onChange:function(e){o&&o(parseInt(e.target.value))},value:a},E.a.range(t,i+1).map((function(e){return r.a.createElement("option",{key:e},e)})))},q=function(e){Object(m.a)(n,e);var a=Object(s.a)(n);function n(e){var t;return Object(o.a)(this,n),(t=a.call(this,e)).state={start:1,end:1,pitch:"C",minLen:2,maxLen:3},E.a.bindAll(Object(u.a)(t),["handlePitch","handleStartRank","handleEndRank","handleMinLen","handleMaxLen","compute"]),t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handlePitch",value:function(e){this.setState({pitch:e})}},{key:"handleStartRank",value:function(e){this.setState({start:e})}},{key:"handleEndRank",value:function(e){this.setState({end:e})}},{key:"handleMinLen",value:function(e){this.setState({minLen:e})}},{key:"handleMaxLen",value:function(e){this.setState({maxLen:e})}},{key:"compute",value:function(){var e=this.state.minLen>this.state.maxLen?"min length must be less or equal than max length":void 0;return e?{errors:e}:{progressions:function(e){for(var a=e.start,n=e.end,t=e.minLen,r=e.maxLen,l=e.pitch,i=[{chords:[a],priority:0}],o=[],c=1;c<=r-1;c++){var u=E()(i).map((function(e){return y(e,{end:n,minLen:t})})).flatten().value(),m=E.a.partition(u,(function(e){return g(e.chords,{end:n,minLen:t})}));o=E.a.concat(o,m[0]),i=m[1]}var s=E()(o).map((function(e){return{avgPriority:e.priority/(e.chords.length-1),chords:E.a.map(e.chords,(function(e){return{mode:e,name:C(l,e)}})),priority:e.priority}})).sortBy("avgPriority","priority",(function(e){return e.chords.length})).value();return{pitch:l,chains:s}}(this.state)}}},{key:"render",value:function(){var e=this.state,a=e.pitch,n=e.minLen,t=e.maxLen,l=e.start,i=e.end,o=this.compute();return r.a.createElement("div",null,r.a.createElement(A.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(A.a.Brand,{href:"http://www.mmarini.org"},"www.mmarini.org"),r.a.createElement(A.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(A.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(D.a,{className:"mr-auto"},r.a.createElement(D.a.Link,{href:"#"},"Modal Progressions ",j)))),r.a.createElement(G.a,null,r.a.createElement(x.a,null,r.a.createElement(M.a,null,r.a.createElement(z,{value:o})),r.a.createElement(M.a,{xs:2},r.a.createElement(w.a,null,r.a.createElement(S.a,{controlId:"pitch"},r.a.createElement(w.a.Label,null,"Pitch"),r.a.createElement(J,{value:a,onChange:this.handlePitch})),r.a.createElement(S.a,{controlId:"startMode"},r.a.createElement(w.a.Label,null,"Start mode"),r.a.createElement(N,{value:l,onChange:this.handleStartRank})),r.a.createElement(S.a,{controlId:"endMode"},r.a.createElement(w.a.Label,null,"End mode"),r.a.createElement(N,{value:i,onChange:this.handleEndRank})),r.a.createElement(S.a,{controlId:"minLen"},r.a.createElement(w.a.Label,null,"Min chain length"),r.a.createElement(T,{value:n,min:2,max:8,onChange:this.handleMinLen})),r.a.createElement(S.a,{controlId:"minLen"},r.a.createElement(w.a.Label,null,"Max chain length"),r.a.createElement(T,{value:t,min:2,max:8,onChange:this.handleMaxLen})))))))}}]),n}(t.Component),H=(n(53),function(){return r.a.createElement("div",null,r.a.createElement(q,null))});i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.a1875a1f.chunk.js.map