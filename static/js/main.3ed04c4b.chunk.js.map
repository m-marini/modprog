{"version":3,"sources":["ModProg.ts","ProgPane.tsx","App.tsx","serviceWorker.js","index.js"],"names":["Next","2","3","4","5","6","7","ChordNames","Pitches","Scales","isFinal","chords","end","minLen","last","_","length","chordName","pitch","mode","addChord","priority","Error","nexts","from","range","priorities","fill","nextCandidateUnzip","zip","map","chord","value","nextCandidate","uniqueNexts","filter","s","sequence","indexOf","r","concat","ChordModes","Chords","i","key","Badge","variant","name","Chain","avgPriority","modes","join","toFixed","ProgressionsPane","chains","Table","striped","bordered","hover","size","chain","ResultPane","errors","progressions","Alert","PitchControl","onChange","FormControl","as","ev","target","ton","Rank","parseInt","LengthControl","min","max","ProgPane","props","state","start","maxLen","bindAll","this","setState","undefined","seed","flatten","ary","partition","chainsWithNames","sortBy","createProgressions","result","compute","Navbar","bg","expand","Brand","href","Toggle","aria-controls","Collapse","id","Nav","className","Link","Container","Row","Col","xs","Form","FormGroup","controlId","Label","handlePitch","handleStartRank","handleEndRank","handleMinLen","handleMaxLen","Component","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.3ed04c4b.chunk.js","sourcesContent":["import _ from 'lodash';\n\n/**\n * Number from 1 to 8\n */\nexport type ChordMode = number;\n\nexport type Pitch = string;\n\nexport type Note = string;\n\nexport type FullChordName = string;\n\n/**\n * List of next chord by priority\n * the number indicate the chord\n */\nconst Next: Record<ChordMode, ChordMode[]> = {\n    2: [5, 3, 4, 6, 7],\n    3: [6, 4, 2, 5],\n    4: [5, 1, 6, 2, 7, 3],\n    5: [1, 6, 3, 4],\n    6: [2, 5, 4, 3],\n    7: [1, 6, 3, 5]\n};\n\nconst ChordNames = ['Maj7', 'm7', 'm7(b9)', 'Maj7(+11)', '7', 'm7(+5)', 'm7b5'];\n\nexport const Pitches = ['C', 'G', 'D', 'A', 'E', 'B', 'F#', 'C#', 'F', 'Bb', 'Eb', 'Ab', 'Db', 'Gb', 'Cb'];\n\n/**\n * Map between pitch and notes\n */\nconst Scales: Readonly<Record<Pitch, Note[]>> = {\n    'C': ['C', 'D', 'E', 'F', 'G', 'A', 'B'],\n    'G': ['G', 'A', 'B', 'C', 'D', 'E', 'F#'],\n    'D': ['D', 'E', 'F#', 'G', 'A', 'B', 'C#'],\n    'A': ['A', 'B', 'C#', 'D', 'E', 'F#', 'G#'],\n    'E': ['E', 'F#', 'G', 'A', 'B', 'C#', 'D#'],\n    'B': ['B', 'C#', 'D#', 'E', 'F#', 'G', 'A#'],\n    'F#': ['F#', 'G', 'A#', 'B', 'C#', 'D#', 'E#'],\n    'C#': ['C#', 'D#', 'E#', 'F#', 'G', 'A#', 'B#'],\n    'F': ['F', 'G', 'A', 'Bb', 'C', 'D', 'E'],\n    'Bb': ['Bb', 'C', 'D', 'Eb', 'F', 'G', 'A'],\n    'Eb': ['Eb', 'F', 'G', 'Ab', 'Bb', 'C', 'D'],\n    'Ab': ['Ab', 'Bb', 'C', 'Db', 'Eb', 'F', 'G'],\n    'Db': ['Db', 'Eb', 'F', 'Gb', 'Ab', 'Bb', 'C'],\n    'Gb': ['Gb', 'Ab', 'Bb', 'Cb', 'Db', 'Eb', 'F'],\n    'Cb': ['Cb', 'Db', 'Eb', 'Fb', 'Gb', 'Ab', 'Bb',],\n};\n\n/**\n * Returns true if the chord sequence doeas not contain the chord\n * @param {*} sequence array of chord modes\n * @param {*} chord chord mode\n */\nfunction notContains(sequence: ChordMode[], chord: ChordMode): boolean {\n    const dupIdx = _.indexOf(sequence, chord);\n    const result = dupIdx < 0;\n    return result;\n}\n\ntype Constraints = Readonly<{\n    end: ChordMode;\n    minLen: number;\n}>;\n\n/**\n * Returns true if chords sequence metch the end and the length constraints\n * @param chords \n * @param param1 \n */\nfunction isFinal(chords: ChordMode[], { end, minLen }: Constraints) {\n    const last = _.last(chords);\n    return chords.length >= minLen && end === last;\n}\n\n/**\n * Returns the full name of chord\n * @param pitch the pitch\n * @param mode  the chord mode\n */\nfunction chordName(pitch: Pitch, mode: ChordMode): FullChordName {\n    return Scales[pitch][mode - 1] + ChordNames[mode - 1];\n}\n\ninterface ChordStep extends Readonly<{\n    chord: ChordMode;\n    priority: number;\n}> { };\n\ninterface ChordChoices extends Readonly<{\n    chords: ChordMode[];\n    priorities: number[];\n}> { };\n\nexport interface ChordSeq extends Readonly<{\n    chords: ChordMode[];\n    priority: number;\n}> { };\n\n/**\n *  Return the list of next candidate chords\n * ```\n *  [{\n *   chord: integer,\n *   priority: integer\n *   },\n *   ...\n *  ]\n * }\n * ```\n * @param {*} from \n */\nexport function nextCandidate(from: ChordMode): ChordStep[] {\n\n    function nextCandidateUnzip(): ChordChoices {\n        if (from === 1) {\n            const chords = _.range(2, 8);\n            const priorities = _.fill(_.range(2, 8), 1);\n            const result: ChordChoices = {\n                chords, priorities\n            };\n            return result;\n        } else {\n            const chords = Next[from];\n            const priorities = _.range(1, chords.length + 1);\n            const result: ChordChoices = {\n                chords, priorities\n            };\n            return result;\n        }\n    };\n    const { chords, priorities } = nextCandidateUnzip();\n    const result: ChordStep[] = _(chords).zip(priorities).map(([chord, priority]) => {\n        if (!chord || !priority) {\n            throw new Error('wrong candidates');\n        }\n        return { chord, priority };\n    }).value();\n    return result;\n}\n\n/**\n * Returns the a list of chords added by next chord\n *\n * @param {*} param0 \n */\nexport function addChord({ chords, priority }: ChordSeq, { end, minLen }: Constraints): ChordSeq[] {\n    const last = _.last(chords);\n    if (!last) {\n        throw new Error('no last found');\n    }\n    const nexts = nextCandidate(last);\n    // filter for unique chord sequence\n    const uniqueNexts = _.filter(nexts, s => {\n        return notContains(chords, s.chord) ||\n            (s.chord === end && chords.length + 1 >= minLen);\n    });\n    const result: ChordSeq[] = _.map(uniqueNexts, r => {\n        return {\n            chords: _.concat(chords, r.chord),\n            priority: priority + r.priority\n        }\n    });\n    return result;\n}\n\nexport interface Chord extends Readonly<{\n    mode: ChordMode;\n    name: FullChordName;\n}> { };\n\nexport interface ChordChain extends Readonly<{\n    priority: number;\n    avgPriority: number;\n    chords: Chord[];\n}> { };\n\nexport interface Progressions extends Readonly<{\n    pitch: Pitch;\n    chains: ChordChain[];\n}> { };\n\nexport type ProgressionProps = Readonly<{\n    start: ChordMode;\n    end: ChordMode;\n    minLen: number;\n    maxLen: number;\n    pitch: Pitch;\n}>;\n\n/**\n * Returns the chains\n * \n * @param {*} param0 \n */\nexport function createProgressions({ start, end, minLen, maxLen, pitch }: ProgressionProps): Progressions {\n    var seed: ChordSeq[] = [{ chords: [start], priority: 0 }];\n    var chains: ChordSeq[] = [];\n    for (var i = 1; i <= maxLen - 1; i++) {\n        const nexts = _(seed).map(s => addChord(s, { end, minLen })).flatten().value();\n        const ary = _.partition(nexts, s => isFinal(s.chords, { end, minLen }));\n        chains = _.concat(chains, ary[0]);\n        seed = ary[1];\n    }\n    const chainsWithNames = _(chains)\n        .map(chain => {\n            const avgPriority = chain.priority / (chain.chords.length - 1);\n            const chords = _.map(chain.chords, mode => {\n                return {\n                    mode,\n                    name: chordName(pitch, mode)\n                };\n            });\n            const result = {\n                avgPriority, chords,\n                priority: chain.priority\n            };\n            return result;\n        })\n        .sortBy('avgPriority', 'priority', chain => chain.chords.length)\n        .value();\n    const result = {\n        pitch: pitch,\n        chains: chainsWithNames\n    };\n    return result;\n}\n","import React, { Component, FunctionComponent } from 'react';\nimport './App.css';\nimport { createProgressions, Pitches, Pitch, ChordMode, Progressions, ChordChain, Chord } from './ModProg';\n\nimport _ from 'lodash';\nimport { Container, Navbar, Form, FormControl, FormGroup, Row, Col, Table, Badge, Alert, Nav } from 'react-bootstrap';\n\nconst Version = \"1.1.2\";\n\nconst ChordModes = _.range(1, 8);\n\n/**\n * \n */\ntype Result = Readonly<{\n  progressions?: Progressions;\n  errors?: string\n}>;\n\n/**\n * \n * @param param0 \n */\nconst Chords: FunctionComponent<Readonly<{\n  value?: Chord[];\n}>> = ({ value = [] }) => {\n  return (\n    <span>\n      {_.map(value, (chord, i) => (\n        <span key={i}>\n          <Badge variant=\"primary\" >{chord.name}</Badge><span> </span>\n        </span>\n      ))}\n    </span>\n  );\n}\n\n/**\n * \n * @param param0 \n */\nconst Chain: FunctionComponent<Readonly<{\n  value?: ChordChain;\n}>> = ({ value }) => {\n  if (value) {\n    const { avgPriority, priority, chords } = value;\n    const modes = _.join(_.map(chords, 'mode'), '-');\n    return (<tr>\n      <td>{modes}</td>\n      <td>\n        <Chords value={chords} />\n      </td>\n      <td>{avgPriority.toFixed(2)}</td>\n      <td>{priority}</td>\n    </tr>);\n  } else {\n    return <tr />;\n  }\n}\n\n/**\n * \n * @param param0 \n */\nconst ProgressionsPane: FunctionComponent<Readonly<{\n  value?: Progressions;\n}>> = ({ value }) => {\n  const chains = value?.chains || [];\n  return (\n    <Table striped bordered hover size=\"sm\">\n      <thead>\n        <tr>\n          <th>Modes</th>\n          <th>Chords</th>\n          <th>Average Favor</th>\n          <th>Total Favor</th>\n        </tr>\n      </thead>\n      <tbody>\n        {_.map(chains, (chain, i) => (\n          <Chain key={i} value={chain} />\n        ))}\n      </tbody>\n    </Table>\n  );\n}\n\n/**\n * \n * @param param0 \n */\nconst ResultPane: FunctionComponent<Readonly<{\n  value?: Result;\n}>> = ({ value }) => {\n  const errors = value?.errors;\n  const progressions = value?.progressions;\n\n  if (errors) {\n    return (\n      <Alert variant=\"danger\">{errors}</Alert>\n    );\n  }\n  if (progressions) {\n    return (<ProgressionsPane value={progressions} />);\n  }\n  return <div />;\n}\n\n/**\n * \n * @param param0 \n */\nconst PitchControl: FunctionComponent<Partial<Readonly<{\n  value: Pitch;\n  onChange: (arg: Pitch) => void\n}>>> = ({ value, onChange }) => {\n  return (\n    <FormControl as=\"select\" size=\"sm\"\n      onChange={ev => { if (onChange) { onChange(ev.target.value); } }}\n      value={value}>\n      {_.map(Pitches, ton => (\n        <option key={ton}>{ton}</option>\n      ))}\n    </FormControl>\n  );\n};\n\n/**\n * \n * @param param0 \n */\nconst Rank: FunctionComponent<Partial<Readonly<{\n  value: ChordMode;\n  onChange: (arg: ChordMode) => void\n}>>> = ({ value, onChange }) => {\n  return (\n    <FormControl as=\"select\" size=\"sm\"\n      onChange={ev => { if (onChange) { onChange(parseInt(ev.target.value)); } }}\n      value={value}>\n      {ChordModes.map(r => (\n        <option key={r}>{r}</option>\n      ))}\n    </FormControl>\n  );\n}\n\n/**\n * \n * @param param0 \n */\nconst LengthControl: FunctionComponent<Partial<Readonly<{\n  value: number;\n  min: number;\n  max: number;\n  onChange: (arg: number) => void\n}>>> = ({ value, min = 1, max = 7, onChange }) => {\n  return (\n    <FormControl as=\"select\" size=\"sm\"\n      onChange={ev => { if (onChange) { onChange(parseInt(ev.target.value)) } }}\n      value={value}>\n      {_.range(min, max + 1).map(r => (\n        <option key={r}>{r}</option>\n      ))}\n    </FormControl>\n  );\n}\n\n/**\n * \n */\nexport class ProgPane extends Component<{}, Readonly<{\n  start: ChordMode;\n  end: ChordMode;\n  pitch: Pitch;\n  minLen: number;\n  maxLen: number;\n}>>\n{\n  /**\n   * \n   * @param props \n   */\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      start: 1,\n      end: 1,\n      pitch: 'C',\n      minLen: 2,\n      maxLen: 3\n    };\n    _.bindAll(this, [\n      'handlePitch',\n      'handleStartRank',\n      'handleEndRank',\n      'handleMinLen',\n      'handleMaxLen',\n      'compute'\n    ]);\n  }\n\n  /**\n   * \n   */\n  componentDidMount() {\n    // this.compute();\n  }\n\n  /**\n   * \n   * @param pitch \n   */\n  private handlePitch(pitch: Pitch) {\n    this.setState({ pitch });\n  }\n\n  /**\n   * \n   * @param start \n   */\n  private handleStartRank(start: ChordMode) {\n    this.setState({ start });\n  }\n\n  /**\n   * \n   * @param end \n   */\n  private handleEndRank(end: ChordMode) {\n    this.setState({ end });\n  }\n\n  /**\n   * \n   * @param minLen \n   */\n  private handleMinLen(minLen: number) {\n    this.setState({ minLen });\n  }\n\n  /**\n   * \n   * @param maxLen \n   */\n  private handleMaxLen(maxLen: number) {\n    this.setState({ maxLen });\n  }\n\n  /**\n   * \n   */\n  private compute(): Result {\n    const errors = (this.state.minLen > this.state.maxLen) ?\n      'min length must be less or equal than max length' :\n      undefined;\n    if (errors) {\n      return { errors };\n    } else {\n      const progressions = createProgressions(this.state);\n      return { progressions }\n    }\n  }\n\n  render() {\n    const { pitch, minLen, maxLen, start, end } = this.state;\n    const result = this.compute();\n\n    return (\n      <div>\n        <Navbar bg=\"dark\" variant=\"dark\" expand=\"lg\">\n          <Navbar.Brand href=\"http://www.mmarini.org\">www.mmarini.org</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n          <Navbar.Collapse id=\"basic-navbar-nav\">\n            <Nav className=\"mr-auto\">\n              <Nav.Link href=\"#\">Modal Progressions {Version}</Nav.Link>\n            </Nav>\n          </Navbar.Collapse>\n        </Navbar>\n        <Container>\n          <Row>\n            <Col >\n              <ResultPane value={result} />\n            </Col>\n            <Col xs={2}>\n              <Form >\n                <FormGroup controlId=\"pitch\">\n                  <Form.Label>Pitch</Form.Label>\n                  <PitchControl value={pitch} onChange={this.handlePitch} />\n                </FormGroup>\n                <FormGroup controlId=\"startMode\">\n                  <Form.Label>Start mode</Form.Label>\n                  <Rank value={start} onChange={this.handleStartRank} />\n                </FormGroup>\n                <FormGroup controlId=\"endMode\">\n                  <Form.Label>End mode</Form.Label>\n                  <Rank value={end} onChange={this.handleEndRank} />\n                </FormGroup>\n                <FormGroup controlId=\"minLen\">\n                  <Form.Label>Min chain length</Form.Label>\n                  <LengthControl value={minLen} min={2} max={8} onChange={this.handleMinLen} />\n                </FormGroup>\n                <FormGroup controlId=\"minLen\">\n                  <Form.Label>Max chain length</Form.Label>\n                  <LengthControl value={maxLen} min={2} max={8} onChange={this.handleMaxLen} />\n                </FormGroup>\n              </Form>\n            </Col>\n          </Row>\n        </Container>\n      </div >\n    );\n  }\n}\n","import React, { FunctionComponent } from 'react';\nimport './App.css';\nimport { ProgPane } from './ProgPane';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nexport const App: FunctionComponent<{}> = () => {\n  return (\n    <div>\n      <ProgPane />\n    </div>\n  );\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}